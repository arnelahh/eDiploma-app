<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<AnchorPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.ThesisDetailsController"
            stylesheets="@styles.css"
            styleClass="root-container">

    <BorderPane prefWidth="1200" prefHeight="800"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

        <!-- TOP BAR -->
        <top>
            <HBox alignment="CENTER" spacing="20" styleClass="top-header">
                <padding>
                    <Insets top="20" bottom="20" left="30" right="30"/>
                </padding>

                <Button text="â†" onAction="#back"
                        style="-fx-font-size: 18; -fx-background-color: transparent; -fx-cursor: hand;"
                        HBox.hgrow="NEVER"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Text text="eDiploma" styleClass="app-title"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Region prefWidth="30"/>
            </HBox>
        </top>

        <!-- CONTENT -->
        <center>
            <StackPane>
                <ScrollPane fitToWidth="true" styleClass="cards-scroll-pane">
                    <VBox spacing="25" styleClass="main-content">
                        <padding>
                            <Insets top="30" right="50" bottom="40" left="50"/>
                        </padding>

                        <!-- PAGE TITLE -->
                        <Text text="Detalji zavrÅ¡nog rada" styleClass="page-title"/>

                        <!-- MAIN CONTENT - Two columns -->
                        <HBox spacing="30">

                            <!-- LEFT COLUMN - Informacije o radu i dokumenti -->
                            <VBox spacing="20" HBox.hgrow="ALWAYS" prefWidth="600">

                                <!-- SECTION: Osnovne informacije -->
                                <VBox spacing="15" styleClass="form-section">
                                    <padding>
                                        <Insets top="20" right="25" bottom="20" left="25"/>
                                    </padding>

                                    <Text text="Osnovne informacije" styleClass="section-title"/>

                                    <!-- Naslov rada -->
                                    <VBox spacing="3">
                                        <HBox spacing="5" alignment="CENTER_LEFT">
                                            <Text text="ðŸ“„" style="-fx-font-size: 12;"/>
                                            <Label text="Naslov rada" styleClass="field-label-small"/>
                                        </HBox>
                                        <Text fx:id="titleValue" text="â€”" styleClass="field-value"
                                              wrappingWidth="500"/>
                                    </VBox>

                                    <!-- Opis rada -->
                                    <VBox spacing="3">
                                        <HBox spacing="5" alignment="CENTER_LEFT">
                                            <Text text="ðŸ“" style="-fx-font-size: 12;"/>
                                            <Label text="Opis rada" styleClass="field-label-small"/>
                                        </HBox>
                                        <Text fx:id="descriptionValue" text="â€”" styleClass="field-value-desc"
                                              wrappingWidth="500"/>
                                    </VBox>

                                    <!-- Grid za predmet, status, datume -->
                                    <HBox spacing="40">
                                        <!-- Predmet -->
                                        <VBox spacing="3">
                                            <HBox spacing="5" alignment="CENTER_LEFT">
                                                <Text text="ðŸ“š" style="-fx-font-size: 12;"/>
                                                <Label text="Predmet" styleClass="field-label-small"/>
                                            </HBox>
                                            <Text fx:id="subjectValue" text="â€”" styleClass="field-value"/>
                                        </VBox>

                                        <!-- Status rada -->
                                        <VBox spacing="3">
                                            <HBox spacing="5" alignment="CENTER_LEFT">
                                                <Text text="â—" style="-fx-font-size: 10; -fx-fill: #00b894;"/>
                                                <Label text="Status rada" styleClass="field-label-small"/>
                                            </HBox>
                                            <Text fx:id="statusValue" text="â€”" styleClass="field-value"/>
                                        </VBox>
                                    </HBox>

                                    <HBox spacing="40">
                                        <!-- Datum prijave -->
                                        <VBox spacing="3">
                                            <HBox spacing="5" alignment="CENTER_LEFT">
                                                <Text text="ðŸ“…" style="-fx-font-size: 12;"/>
                                                <Label text="Datum prijave" styleClass="field-label-small"/>
                                            </HBox>
                                            <Text fx:id="applicationDateValue" text="--/--/----" styleClass="field-value"/>
                                        </VBox>

                                        <!-- Datum odbrane -->
                                        <VBox spacing="3">
                                            <HBox spacing="5" alignment="CENTER_LEFT">
                                                <Text text="ðŸ“…" style="-fx-font-size: 12;"/>
                                                <Label text="Datum odbrane" styleClass="field-label-small"/>
                                            </HBox>
                                            <Text fx:id="defenseDateValue" text="--/--/----" styleClass="field-value"/>
                                        </VBox>
                                    </HBox>
                                </VBox>

                                <!-- BUTTONS: ObriÅ¡i i Uredi -->
                                <HBox spacing="15" alignment="CENTER_LEFT">
                                    <Button text="ObriÅ¡i" onAction="#handleDelete" styleClass="delete-button-outline"/>
                                    <Button text="Uredi" onAction="#handleEdit" styleClass="edit-button-outline"/>
                                </HBox>

                                <!-- SECTION: Dokumenti -->
                                <VBox spacing="15">
                                    <VBox spacing="3">
                                        <Text text="Dokumenti" styleClass="section-title"/>
                                        <Text text="Pregled i generisanje sluÅ¾benih dokumenata" styleClass="page-subtitle"/>
                                    </VBox>

                                    <!-- Dokument 1: RjeÅ¡enje o izradi zavrÅ¡nog rada - ZELENA -->
                                    <HBox styleClass="document-card document-green" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="RjeÅ¡enje o izradi zavrÅ¡nog rada" styleClass="document-title"/>
                                            <Text text="Dostupno za pregled" style="-fx-font-size: 11px; -fx-fill: #00b894;"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="âœ‰" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>

                                    <!-- Dokument 2: RjeÅ¡enje o formiranju Komisije - ZELENA -->
                                    <HBox styleClass="document-card document-green" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="RjeÅ¡enje o formiranju Komisije" styleClass="document-title"/>
                                            <Text text="Dostupno za pregled" style="-fx-font-size: 11px; -fx-fill: #00b894;"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="âœ‰" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>

                                    <!-- Dokument 3: Obavijest - Å½UTA -->
                                    <HBox styleClass="document-card document-yellow" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="Obavijest" styleClass="document-title"/>
                                            <Text text="U procesu" style="-fx-font-size: 11px; -fx-fill: #f39c12;"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="âœ‰" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>

                                    <!-- Dokument 4: Zapisnik o pismenom dijelu diplomskog rada - CRVENA -->
                                    <HBox styleClass="document-card document-red" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="Zapisnik o pismenom dijelu diplomskog rada" styleClass="document-title"/>
                                            <Text text="Potrebna akcija" style="-fx-font-size: 11px; -fx-fill: #e74c3c;"/>
                                        </VBox>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" disable="true"/>
                                        <Button text="âœ" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>

                                    <!-- Dokument 5: Zapisnik sa odbrane - SIVA -->
                                    <HBox styleClass="document-card document-gray" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="Zapisnik sa odbrane" styleClass="document-title"/>
                                            <Text text="JoÅ¡ nije dostupno" style="-fx-font-size: 11px; -fx-fill: #95a5a6;"/>
                                        </VBox>
                                        <Region HBox.hgrow="ALWAYS"/>
                                        <Button text="âŠ•" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>

                                    <!-- Dokument 6: Uvjerenje o zavrÅ¡enom ciklusu - SIVA -->
                                    <HBox styleClass="document-card document-gray" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Text text="Uvjerenje o zavrÅ¡enom ciklusu" styleClass="document-title"/>
                                            <Text text="JoÅ¡ nije dostupno" style="-fx-font-size: 11px; -fx-fill: #95a5a6;"/>
                                        </VBox>
                                        <Region HBox.hgrow="ALWAYS"/>
                                        <Button text="âŠ•" styleClass="document-icon-btn" disable="true"/>
                                    </HBox>
                                </VBox>
                            </VBox>

                            <!-- RIGHT COLUMN - Student, Mentor, Komisija -->
                            <VBox spacing="20" prefWidth="320">

                                <!-- SECTION: Student -->
                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¤" style="-fx-font-size: 14;"/>
                                        <Text text="Student" styleClass="info-card-title"/>
                                    </HBox>

                                    <VBox spacing="3">
                                        <Label text="Ime i Prezime" styleClass="field-label-small"/>
                                        <Text fx:id="studentName" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Broj indeksa" styleClass="field-label-small"/>
                                        <Text fx:id="studentIndex" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Email adresa" styleClass="field-label-small"/>
                                        <Text fx:id="studentEmail" text="â€”" styleClass="info-card-value-email"/>
                                    </VBox>
                                </VBox>

                                <!-- SECTION: Mentor -->
                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¨â€ðŸ«" style="-fx-font-size: 14;"/>
                                        <Text text="Mentor" styleClass="info-card-title"/>
                                    </HBox>

                                    <VBox spacing="3">
                                        <Label text="Zvanje" styleClass="field-label-small"/>
                                        <Text fx:id="mentorTitle" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Ime i Prezime" styleClass="field-label-small"/>
                                        <Text fx:id="mentorName" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Email adresa" styleClass="field-label-small"/>
                                        <Text fx:id="mentorEmail" text="â€”" styleClass="info-card-value-email"/>
                                    </VBox>
                                </VBox>

                                <!-- SECTION: Komisija -->
                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¥" style="-fx-font-size: 14;"/>
                                        <Text text="Komisija" styleClass="info-card-title"/>
                                    </HBox>

                                    <!-- Ako komisija NIJE formirana -->
                                    <VBox fx:id="commissionNotFormedBox" spacing="15" alignment="CENTER">
                                        <Text text="Komisija nije formirana" styleClass="commission-not-formed-text"/>
                                        <Button text="Formiraj komisiju" onAction="#handleFormCommission"
                                                styleClass="form-commission-button"/>
                                    </VBox>

                                    <!-- Ako komisija JESTE formirana -->
                                    <VBox fx:id="commissionFormedBox" spacing="10" visible="false" managed="false">
                                        <VBox spacing="3">
                                            <Label text="Predsjednik komisije" styleClass="field-label-small"/>
                                            <Text fx:id="chairmanName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Mentor" styleClass="field-label-small"/>
                                            <Text fx:id="mentorCommissionName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="ÄŒlan komisije" styleClass="field-label-small"/>
                                            <Text fx:id="memberName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Sekretar" styleClass="field-label-small"/>
                                            <Text fx:id="secretaryCommissionName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Zamjenski Älan" styleClass="field-label-small"/>
                                            <Text fx:id="substituteName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <Button text="Uredi komisiju" onAction="#handleEditCommission"
                                                styleClass="edit-commission-button"/>
                                    </VBox>
                                </VBox>
                            </VBox>
                        </HBox>
                    </VBox>
                </ScrollPane>

                <!-- Loader -->
                <ProgressIndicator fx:id="loader"
                                   visible="false"
                                   prefWidth="60"
                                   prefHeight="60"
                                   StackPane.alignment="CENTER"/>
            </StackPane>
        </center>

    </BorderPane>

</AnchorPane>