<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<AnchorPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.ThesisDetailsController"
            stylesheets="@styles.css"
            styleClass="root-container">

    <BorderPane prefWidth="1200" prefHeight="800"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

        <top>
            <HBox alignment="CENTER" spacing="20" styleClass="top-header">
                <padding>
                    <Insets top="20" bottom="20" left="30" right="30"/>
                </padding>

                <Button text="â†" onAction="#back"
                        style="-fx-font-size: 18; -fx-background-color: transparent; -fx-cursor: hand;"
                        HBox.hgrow="NEVER"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Text text="eDiploma" styleClass="app-title"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Region prefWidth="30"/>
            </HBox>
        </top>

        <center>
            <StackPane>
                <ScrollPane fitToWidth="true" styleClass="cards-scroll-pane">
                    <VBox spacing="25" styleClass="main-content">
                        <padding>
                            <Insets top="30" right="50" bottom="40" left="50"/>
                        </padding>

                        <Text text="Detalji zavrÅ¡nog rada" styleClass="page-title"/>

                        <HBox spacing="30">

                            <VBox spacing="20" HBox.hgrow="ALWAYS" prefWidth="600">

                                <VBox spacing="0" styleClass="form-section">
                                    <padding>
                                        <Insets top="25" right="30" bottom="25" left="30"/>
                                    </padding>

                                    <HBox alignment="TOP_LEFT" spacing="20">
                                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                                            <Text fx:id="titleValue" text="Naslov zavrÅ¡nog rada"
                                                  style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-fill: #111827;"
                                                  wrappingWidth="700"/>

                                            <Text fx:id="subjectValue" text="PREDMET"
                                                  style="-fx-fill: #6B7280; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                                        </VBox>

                                        <VBox spacing="0" alignment="TOP_RIGHT" minWidth="80">
                                            <Text text="OCJENA" style="-fx-fill: #9CA3AF; -fx-font-size: 10px; -fx-font-weight: bold;"/>
                                            <Text fx:id="gradeValue" text="â€”" style="-fx-font-size: 56px; -fx-font-weight: bold; -fx-fill: #374151;"/>
                                        </VBox>
                                    </HBox>

                                    <Region prefHeight="30" />

                                    <HBox alignment="CENTER_LEFT" spacing="20"
                                          style="-fx-border-color: #E5E7EB transparent transparent transparent; -fx-border-width: 1 0 0 0; -fx-padding: 20 0 0 0;">

                                        <HBox spacing="25" alignment="CENTER_LEFT">
                                            <VBox spacing="2">
                                                <Text text="PRIJAVA" style="-fx-fill: #9CA3AF; -fx-font-size: 10px; -fx-font-weight: bold;"/>
                                                <HBox spacing="6" alignment="CENTER_LEFT">
                                                    <Text text="ðŸ“…" style="-fx-font-size: 14;"/>
                                                    <Text fx:id="applicationDateValue" text="--/--/----" style="-fx-fill: #374151; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                                                </HBox>
                                            </VBox>

                                            <Text text="âž" style="-fx-fill: #D1D5DB; -fx-font-size: 14px; -fx-font-weight: bold;"/>

                                            <VBox spacing="2">
                                                <Text text="ODBRANA" style="-fx-fill: #9CA3AF; -fx-font-size: 10px; -fx-font-weight: bold;"/>
                                                <HBox spacing="6" alignment="CENTER_LEFT">
                                                    <Text text="ðŸ" style="-fx-font-size: 14;"/>
                                                    <Text fx:id="defenseDateValue" text="--" style="-fx-fill: #374151; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                                                </HBox>
                                            </VBox>
                                        </HBox>

                                        <Region HBox.hgrow="ALWAYS"/>

                                        <HBox alignment="CENTER" style="-fx-background-color: #F3F4F6; -fx-background-radius: 20; -fx-padding: 5 15;">
                                            <Text fx:id="statusValue" text="STATUS" style="-fx-fill: #374151; -fx-font-weight: bold; -fx-font-size: 11px;"/>
                                        </HBox>
                                    </HBox>
                                </VBox>

                                <HBox spacing="15" alignment="CENTER_RIGHT">
                                    <Button text="ObriÅ¡i" onAction="#handleDelete" styleClass="delete-button-outline"/>
                                    <Button text="Uredi" onAction="#handleEdit" styleClass="edit-button-outline"/>
                                </HBox>

                                <VBox spacing="15" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml">

                                    <VBox spacing="3">
                                        <Text text="Dokumenti" styleClass="section-title"/>
                                        <Text text="Pregled i generisanje sluÅ¾benih dokumenata" styleClass="page-subtitle"/>
                                    </VBox>

                                    <HBox styleClass="document-card, document-green" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="RjeÅ¡enje o izradi zavrÅ¡nog rada" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn"/>
                                        <Button text="âœ" styleClass="document-icon-btn" onAction="#handleOpenFinalThesisApproalReport"/>
                                    </HBox>

                                    <HBox styleClass="document-card, document-green" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="RjeÅ¡enje o formiranju Komisije" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn"/>
                                        <Button text="âœ" styleClass="document-icon-btn" />
                                    </HBox>

                                    <HBox styleClass="document-card, document-green" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="Obavijest" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="â¬‡" styleClass="document-icon-btn"/>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn"/>
                                        <Button text="âœ" styleClass="document-icon-btn"/>
                                    </HBox>

                                    <HBox styleClass="document-card, document-yellow" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="Zapisnik o pismenom dijelu diplomskog rada" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" onAction="#handleOpenWrittenExamReport"/>
                                        <Button text="âœ" styleClass="document-icon-btn" onAction="#handleOpenWrittenExamReport"/>
                                    </HBox>

                                    <HBox styleClass="document-card, document-yellow" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="Zapisnik sa odbrane" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="ðŸ‘" styleClass="document-icon-btn" onAction="#handleOpenDefenseReport"/>
                                        <Button text="âœ" styleClass="document-icon-btn" onAction="#handleOpenDefenseReport"/>
                                    </HBox>

                                    <HBox styleClass="document-card, document-gray" alignment="CENTER_LEFT" spacing="10">
                                        <VBox HBox.hgrow="ALWAYS" alignment="CENTER_LEFT">
                                            <Text text="Uvjerenje o zavrÅ¡enom ciklusu" styleClass="document-title"/>
                                        </VBox>
                                        <Button text="+" styleClass="document-icon-btn" style="-fx-font-size: 18px; -fx-font-weight:bold;"/>
                                    </HBox>

                                </VBox>
                            </VBox>

                            <VBox spacing="20" prefWidth="320">

                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¤" style="-fx-font-size: 14;"/>
                                        <Text text="Student" styleClass="info-card-title"/>
                                    </HBox>

                                    <VBox spacing="3">
                                        <Label text="Ime i Prezime" styleClass="field-label-small"/>
                                        <Text fx:id="studentName" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Broj indeksa" styleClass="field-label-small"/>
                                        <Text fx:id="studentIndex" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Email adresa" styleClass="field-label-small"/>
                                        <Text fx:id="studentEmail" text="â€”" styleClass="info-card-value-email"/>
                                    </VBox>
                                </VBox>

                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¨â€ðŸ«" style="-fx-font-size: 14;"/>
                                        <Text text="Mentor" styleClass="info-card-title"/>
                                    </HBox>

                                    <VBox spacing="3">
                                        <Label text="Zvanje" styleClass="field-label-small"/>
                                        <Text fx:id="mentorTitle" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Ime i Prezime" styleClass="field-label-small"/>
                                        <Text fx:id="mentorName" text="â€”" styleClass="info-card-value"/>
                                    </VBox>

                                    <VBox spacing="3">
                                        <Label text="Email adresa" styleClass="field-label-small"/>
                                        <Text fx:id="mentorEmail" text="â€”" styleClass="info-card-value-email"/>
                                    </VBox>
                                </VBox>

                                <VBox spacing="12" styleClass="info-card">
                                    <padding>
                                        <Insets top="20" right="20" bottom="20" left="20"/>
                                    </padding>

                                    <HBox spacing="8" alignment="CENTER_LEFT">
                                        <Text text="ðŸ‘¥" style="-fx-font-size: 14;"/>
                                        <Text text="Komisija" styleClass="info-card-title"/>
                                    </HBox>

                                    <VBox fx:id="commissionNotFormedBox" spacing="15" alignment="CENTER">
                                        <Text text="Komisija nije formirana" styleClass="commission-not-formed-text"/>
                                        <Button text="Formiraj komisiju" onAction="#handleFormCommission"
                                                styleClass="form-commission-button"/>
                                    </VBox>

                                    <VBox fx:id="commissionFormedBox" spacing="10" visible="false" managed="false">
                                        <VBox spacing="3">
                                            <Label text="Predsjednik komisije" styleClass="field-label-small"/>
                                            <Text fx:id="chairmanName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Mentor" styleClass="field-label-small"/>
                                            <Text fx:id="mentorCommissionName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="ÄŒlan komisije" styleClass="field-label-small"/>
                                            <Text fx:id="memberName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Sekretar" styleClass="field-label-small"/>
                                            <Text fx:id="secretaryCommissionName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <VBox spacing="3">
                                            <Label text="Zamjenski Älan" styleClass="field-label-small"/>
                                            <Text fx:id="substituteName" text="â€”" styleClass="info-card-value"/>
                                        </VBox>

                                        <Button text="Uredi komisiju" onAction="#handleEditCommission"
                                                styleClass="edit-commission-button"/>
                                    </VBox>
                                </VBox>
                            </VBox>
                        </HBox>
                    </VBox>
                </ScrollPane>

                <ProgressIndicator fx:id="loader"
                                   visible="false"
                                   prefWidth="60"
                                   prefHeight="60"
                                   StackPane.alignment="CENTER"/>
            </StackPane>
        </center>

    </BorderPane>

</AnchorPane>