<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<?import org.controlsfx.control.SearchableComboBox?>
<AnchorPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.CommissionFormController"
            stylesheets="@styles.css"
            styleClass="root-container">

    <BorderPane prefWidth="1200" prefHeight="800"
                AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0"
                AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

        <!-- TOP BAR -->
        <top>
            <HBox alignment="CENTER" spacing="20" styleClass="top-header">
                <padding>
                    <Insets top="20" bottom="20" left="30" right="30"/>
                </padding>

                <Button text="←" onAction="#handleCancel"
                        styleClass="btn-back-outline"
                        HBox.hgrow="NEVER"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Text text="eDiploma" styleClass="app-title"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Region prefWidth="30"/>
            </HBox>
        </top>

        <!-- CONTENT -->
        <center>
            <StackPane>
                <ScrollPane fitToWidth="true" styleClass="cards-scroll-pane">
                    <VBox spacing="25" styleClass="main-content">
                        <padding>
                            <Insets top="30" right="50" bottom="40" left="50"/>
                        </padding>

                        <!-- PAGE TITLE -->
                        <VBox spacing="5">
                            <Text fx:id="formTitle" text="Dodavanje komisije" styleClass="page-title"/>
                            <Text fx:id="formSubtitle" text="Unesite komisiju za završni rad" styleClass="page-subtitle"/>
                        </VBox>

                        <!-- FORM SECTION -->
                        <VBox spacing="20" styleClass="form-section" maxWidth="800">
                            <padding>
                                <Insets top="25" right="30" bottom="25" left="30"/>
                            </padding>

                            <VBox spacing="3">
                                <Text text="Osnovni podaci" styleClass="section-title"/>
                                <Text text="Osnovni podaci o komisiji" styleClass="page-subtitle"/>
                            </VBox>

                            <GridPane hgap="30" vgap="20">
                                <!-- Predsjednik komisije -->
                                <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                    <Label text="Predsjednik komisije *" styleClass="field-label"/>
                                    <SearchableComboBox fx:id="chairmanComboBox"
                                                        promptText="Izaberite predsjednika komisije"
                                                        prefWidth="9999" styleClass="form-field"/>
                                </VBox>

                                <!-- Mentor (SADA EDITABLE) -->
                                <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                    <Label text="Mentor *" styleClass="field-label"/>
                                    <SearchableComboBox fx:id="mentorComboBox"
                                              promptText="Izaberite mentora"
                                              prefWidth="9999" styleClass="form-field"/>
                                </VBox>

                                <!-- Član komisije -->
                                <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                    <Label text="Član komisije *" styleClass="field-label"/>
                                    <SearchableComboBox fx:id="memberComboBox"
                                              promptText="Izaberite člana komisije"
                                              prefWidth="9999" styleClass="form-field"/>
                                </VBox>

                                <!-- Sekretar (SADA EDITABLE) -->
                                <VBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                    <Label text="Sekretar *" styleClass="field-label"/>
                                    <SearchableComboBox fx:id="secretaryComboBox"
                                              promptText="Izaberite sekretara"
                                              prefWidth="9999" styleClass="form-field"/>
                                </VBox>

                                <!-- Zamjenski član -->
                                <VBox spacing="5" GridPane.columnIndex="0" GridPane.rowIndex="2">
                                    <Label text="Zamjenski član" styleClass="field-label"/>
                                    <SearchableComboBox fx:id="substituteComboBox"
                                              promptText="Izaberite zamjenskog člana (opciono)"
                                              prefWidth="9999" styleClass="form-field"/>
                                </VBox>

                                <columnConstraints>
                                    <ColumnConstraints percentWidth="50"/>
                                    <ColumnConstraints percentWidth="50"/>
                                </columnConstraints>
                            </GridPane>
                        </VBox>

                        <!-- INFO MESSAGE -->
                        <VBox spacing="10" style="-fx-background-color: #e3f2fd; -fx-background-radius: 8; -fx-padding: 15;">
                            <Text text="ℹ️ Napomena" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                            <Text text="Promjena mentora ili sekretara će ažurirati podatke za cijeli završni rad."
                                  style="-fx-font-size: 13; -fx-fill: #1976d2;" wrappingWidth="750"/>
                        </VBox>

                        <!-- ACTIONS -->
                        <HBox alignment="CENTER_RIGHT" spacing="15">
                            <Button text="Odustani" onAction="#handleCancel" styleClass="cancel-button"/>
                            <Button text="Sačuvaj" onAction="#handleSave" styleClass="save-button"/>
                        </HBox>
                    </VBox>
                </ScrollPane>

                <!-- Loader -->
                <ProgressIndicator fx:id="loader"
                                   visible="false"
                                   prefWidth="60"
                                   prefHeight="60"
                                   StackPane.alignment="CENTER"/>
            </StackPane>
        </center>

    </BorderPane>

</AnchorPane>