<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane fx:id="rootPane" style="-fx-background-color: white;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.LoginController">

    <StackPane alignment="CENTER"
               AnchorPane.topAnchor="0"
               AnchorPane.bottomAnchor="0"
               AnchorPane.leftAnchor="0"
               AnchorPane.rightAnchor="0">

        <VBox alignment="CENTER"
              spacing="18"
              style="-fx-background-color: white; -fx-background-radius: 12;">
            <padding>
                <Insets top="30" right="30" bottom="30" left="30"/>
            </padding>

            <Label text="eDiploma" textFill="#4f5dff">
                <font>
                    <Font name="Arial" size="56"/>
                </font>
            </Label>

            <VBox alignment="CENTER_LEFT" maxWidth="360" spacing="6">
                <Label text="Email"/>
                <TextField fx:id="emailField" prefHeight="40" promptText="Unesite vaÅ¡u email adresu"
                           style="-fx-background-radius: 8; -fx-background-color: #f0f0f0; -fx-border-color: transparent;"/>
            </VBox>

            <HBox alignment="CENTER_LEFT" spacing="0" maxWidth="360">
                <VBox alignment="CENTER_LEFT" spacing="6" HBox.hgrow="ALWAYS">
                    <Label text="Lozinka"/>

                    <!-- StackPane za PasswordField/TextField i dugme -->
                    <StackPane prefHeight="40">
                        <PasswordField fx:id="passwordField"
                                       prefHeight="40"
                                       promptText="Unesite vaÅ¡u lozinku"
                                       style="-fx-background-radius: 8; -fx-background-color: #f0f0f0; -fx-border-color: transparent;"
                                       prefWidth="9999"/>

                        <TextField fx:id="passwordTextField"
                                   prefHeight="40"
                                   promptText="Unesite vaÅ¡u lozinku"
                                   style="-fx-background-radius: 8; -fx-background-color: #f0f0f0; -fx-border-color: transparent;"
                                   visible="false"
                                   prefWidth="9999"/>

                        <!-- Dugme unutar inputa, desno -->
                        <Button fx:id="togglePasswordButton"
                                text="ðŸ‘"
                                style="-fx-background-color: transparent; -fx-cursor: hand;"
                                onAction="#togglePasswordVisibility"
                                StackPane.alignment="CENTER_RIGHT"
                                prefHeight="40"
                                prefWidth="40"/>
                    </StackPane>
                </VBox>
            </HBox>


            <Button text="Prijavite se" maxWidth="360" prefHeight="42"
                    onAction="#handleLogin"
                    style="-fx-background-color: #4f5dff; -fx-background-radius: 8; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold;"/>
        </VBox>

        <!-- Added progress indicator for login loading state -->
        <ProgressIndicator fx:id="loader" visible="false" style="-fx-progress-color: #4f5dff;"/>

    </StackPane>

</AnchorPane>
